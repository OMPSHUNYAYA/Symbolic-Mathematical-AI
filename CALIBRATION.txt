SSM-AI— Calibration (ASCII)

Canonicals
  phi((m,a)) = m
  a_c := clamp(a, -1+eps_a, +1-eps_a)
  u := atanh(a_c) ; a := tanh(u)
  a_out := tanh( (SUM w*atanh(a_i)) / max(SUM w, eps_w) )
  RSI := tanh( (V_out - U_in) / max(W_in, eps_w) )

Goal
  Choose stable, comparable knobs so RSI and bands are informative without saturating or going tiny. m is never changed.

Primary knobs and safe defaults
  eps_a   = 1e-6          ; clamp margin for a
  eps_w   = 1e-12         ; denominator floor in rapidity fusion (>=1e-8 if float32)
  bands   = {A++:0.90, A+:0.60, A0:-0.60, A:-0.90, A--:-1.00}
  hysteresis: h_up = 0.02 ; h_dn = 0.02 (optional; reduce flapping at band edges)
  weights: w := |m|^gamma with gamma = 1 (or w := 1 for apples-to-apples)

Lens calibration quickstart (2 minutes)
  1) Sample K recent items’ raw terms (no PII).
  2) Compute provisional e_raw with Unit := 1.
  3) Set Unit: q := median(|e_raw|) ; Unit := max(q, 1e-6) so typical |e| ≈ 1.
  4) Set c: start c := 1.0 ; if >10% of |a| >= 0.90 lower c (e.g., 0.7). If >70% of |a| < 0.10 raise c (e.g., 1.3).
  5) Freeze: stamp Unit, c, alpha/beta in manifest and re-use across vendors.

Sanity metrics (log once/day)
  • saturation rate: mean(|a| > 0.90) should be small
  • dead-zone rate: mean(|a| < 0.10) should be moderate
  • drift watch: median RSI and band histogram; large shifts trigger review

Division policy (lane purity)
  default: "strict" (do not act on near-zero denominators; lane-only math may be logged)
  alternatives: "meadow" / "soft" require explicit declaration; m is never changed

Acceptance checklist
  [ ] Collapse parity: phi((m,a)) = m on sample rows
  [ ] Boundedness: all a, RSI, RSI_env in (-1,+1)
  [ ] Order/shard invariance: tanh(sum(U)/max(sum(W), eps_w)) reproduces pooled a_out
  [ ] Band boundaries: exact 0.90, 0.60, -0.60, -0.90 map as specified (with hysteresis if enabled)
  [ ] Gate purity: RSI_env follows g_t; m unchanged
  [ ] Determinism: same manifest + inputs ⇒ same RSI, RSI_env, band

Common pitfalls and quick fixes
  • Too many A++/A--: adjust c (lens gain) to avoid saturation; verify eps_a clamps applied
  • Flapping near thresholds: enable hysteresis with h_up/h_dn ~ 0.02
  • Order effects suspected: confirm U/W replay equals batch; check eps_w floor not too large
  • Cross-vendor comparisons: publish bands table and Unit/c in manifest; keep weights policy stable

Minimal manifest crib (publish)
  eps_a, eps_w, bands, weights_policy, gamma, gate.mode, division_policy, lens_id, lens_params(Unit,c), knobs_hash

One-line takeaway
  Keep knobs small, public, and steady; lanes stay bounded via tanh/atanh and selection by RSI, while phi((m,a)) = m guarantees classical numbers remain pristine.
